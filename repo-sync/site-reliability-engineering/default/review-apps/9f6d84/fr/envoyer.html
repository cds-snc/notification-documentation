<!DOCTYPE html>
<html lang="fr-CA">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Envoyer un message | Notification GC</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" href="https://notification.canada.ca/static/images/favicon.ico">
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-KRKRZQV');
    </script>
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-R04KFLQCVQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-R04KFLQCVQ', {anonymize_ip: true});
    </script>
    <meta name="description" content="Intégration directe à l`API Notification GC">
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/css/0.styles.691859ca.css" as="style"><link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/app.f2075de5.js" as="script"><link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/3.53dc4691.js" as="script"><link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/1.b9e473a4.js" as="script"><link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/29.a9403534.js" as="script"><link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/42.ebb76093.js" as="script"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/10.9ef1c266.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/11.6567fa7b.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/12.0cb9f0b7.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/13.cbcf67c7.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/14.1972e147.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/15.d7e9f6de.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/16.4e549a06.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/17.50b38424.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/18.dd05a90f.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/19.f4dee91a.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/2.095ee38d.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/20.e8fb7e45.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/21.17b25659.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/22.2a7ffce9.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/23.92824cca.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/24.2bc18365.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/25.cc3f7e59.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/26.0317349f.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/27.e523ac0b.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/28.80d97a90.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/30.9132cf80.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/31.da24aeff.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/32.b15935de.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/33.6344f31c.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/34.1dd3c525.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/35.bbb388be.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/36.855a369a.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/37.8f1e0c54.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/38.7989bc64.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/39.5b26f45b.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/4.5b8eb95c.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/40.794b06d3.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/41.743c5f40.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/43.19f5c9f0.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/44.3300f0d2.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/45.7d86992c.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/46.00c6606e.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/47.de7d5ab1.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/48.915535c1.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/49.a4cda5f5.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/5.13ac6dae.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/50.6d68610a.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/51.30f87d06.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/52.7bb1d802.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/6.7c8bf701.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/9.f6c4b3aa.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/vendors~docsearch.289606e8.js">
    <link rel="stylesheet" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/css/0.styles.691859ca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KRKRZQV" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/" class="home-link router-link-active"><img src="https://assets.notification.canada.ca/static/gov-canada-fr.svg" alt="Notification GC" class="logo"> <div class="site-name can-hide">Notification GC</div> <div class="site-subtitle">Documentation API</div></a> <div class="links"><div class="search-box"><input aria-label="Search" type="search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide nav-links"><div class="nav-item"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/en/send.html" class="nav-link">
  English
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/en/send.html" class="nav-link">
  English
</a></div> <!----></nav> <div class="back-to-notify"><a href="https://notification.canada.ca?lang=fr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Retour à Notification GC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="back-to-notify"><a href="https://notification.canada.ca/guides-reference" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Guides de référence
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <ul class="sidebar-links"><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/" aria-current="page" class="sidebar-link">Intégrer l’API</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/commencer.html" class="sidebar-link">Pour commencer</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/envoyer.html" aria-current="page" class="active sidebar-link">Envoyer un message</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/envoyer.html#verifiez-l-etat-du-message-corrigez-et-envoyez-a-nouveau" class="sidebar-link">Vérifiez l’état du message, corrigez et envoyez à nouveau</a></li><li class="sidebar-sub-header"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/envoyer.html#envoyer-un-courriel" class="sidebar-link">Envoyer un courriel</a></li><li class="sidebar-sub-header"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/envoyer.html#l-envoi-de-fichiers-par-courriel-est-une-fonctionnalite-unique-a-l-api" class="sidebar-link">L’envoi de fichiers par courriel est une fonctionnalité unique à l’API</a></li><li class="sidebar-sub-header"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/envoyer.html#envoyer-un-message-texte" class="sidebar-link">Envoyer un message texte</a></li><li class="sidebar-sub-header"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/envoyer.html#envoyer-des-notifications-de-masse" class="sidebar-link">Envoyer des notifications de masse</a></li><li class="sidebar-sub-header"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/envoyer.html#curl-example" class="sidebar-link">CURL Example</a></li></ul></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/etat.html" class="sidebar-link">Obtenir l’état du message</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/essai.html" class="sidebar-link">Mise à l’essai</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/cles.html" class="sidebar-link">Clés API</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/limites.html" class="sidebar-link">Limites</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/rappel.html" class="sidebar-link">Fonctions de rappel</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/architecture.html" class="sidebar-link">Architecture API</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/clients.html" class="sidebar-link">Bibliothèques client</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/apispec.html" class="sidebar-link">Spécification OpenAPI</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="envoyer-un-message"><a href="#envoyer-un-message" class="header-anchor">#</a> Envoyer un message</h1> <p>Vous pouvez utiliser Notification GC pour envoyer des courriels et des messages texte. Il peut s’agir d’une réponse à un événement généré par l’utilisateur, comme un reçu après qu’ils demandent votre service, ou comme un rappel lorsqu’un paiement est attendu.</p> <p><strong>Ce dont vous aurez besoin :</strong></p> <p>Pour envoyer un message à l’aide de Notification GC, vous devez configurer un gabarit dans l’interface utilisateur.</p> <p>Pour créer un gabarit :</p> <ol><li><a href="https://notification.canada.ca/sign-in?lang=fr" target="_blank" rel="noopener noreferrer">Connectez-vous à Notification GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Accédez à la page <strong>Gabarits</strong>.</li> <li>Sélectionnez <strong>Nouveau gabarit</strong>.</li></ol> <p>Une fois le gabarit prêt, recherchez l’ID de gabarit associé. Vous aurez besoin de cet ID pour indiquer le gabarit que vous voulez utiliser lorsque vous appelez l’API.</p> <p>Votre appel à l'API doit également inclure tous les champs qui ont été configurés comme des personnalisations. La personnalisation vous permet de modifier ce qui apparaît dans un message précis lors de son envoi. Vous pouvez utiliser la personnalisation pour :</p> <ul><li>Vous adresser à un utilisateur par son nom</li> <li>Fournir aux utilisateurs un lien précis sur lequel cliquer</li> <li>Envoyer un numéro de transaction unique comme suivi</li> <li>Donner aux utilisateurs une liste dynamique des mesures qu’ils doivent prendre</li></ul> <h2 id="verifiez-l-etat-du-message-corrigez-et-envoyez-a-nouveau"><a href="#verifiez-l-etat-du-message-corrigez-et-envoyez-a-nouveau" class="header-anchor">#</a> Vérifiez l’état du message, corrigez et envoyez à nouveau</h2> <p>Si vous obtenez pour vos requêtes HTTP:</p> <ol><li>une erreur de classe 4xx correspondant à une requête invalide; ou</li> <li>une erreur de classe 5xx correspondant à un échec du serveur,</li></ol> <p>Notification GC traite ces erreurs comme des demandes non traitées. Veuillez renvoyer ces demandes afin que nous les traitions.</p> <p>Pour que Notification GC puisse réessayer jusqu’à ce que l’envoi soit effectué, les demandes doivent obtenir un succès de classe 2xx. Limitez les requêtes à l’API de Notification GC à 1 000 par minute. Si vous dépassez ce nombre, vous obtiendrez une erreur 429.</p> <h2 id="envoyer-un-courriel"><a href="#envoyer-un-courriel" class="header-anchor">#</a> Envoyer un courriel</h2> <div class="language- extra-class"><pre class="language-text"><code>POST /v2/notifications/email
</code></pre></div><h3 id="corps-de-la-requete"><a href="#corps-de-la-requete" class="header-anchor">#</a> Corps de la requête</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;email_address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;expéditeur@quelquechose.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;template_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f33517ff-2a88-4f6e-b855-c550268ce08a&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="parametres"><a href="#parametres" class="header-anchor">#</a> Paramètres</h3> <p><strong>Adresse courriel (obligatoire)</strong></p> <p><code>email_address</code> est l'adresse de courriel du destinataire.</p> <div class="content__default"><p><strong>ID du gabarit (obligatoire)</strong></p> <p>Pour rechercher <code>template_id</code> (ID du gabarit) :</p> <ol><li><a href="https://notification.canada.ca/sign-in?lang=fr" target="_blank" rel="noopener noreferrer">Connectez-vous à Notification GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Accédez à la page <strong>Gabarits</strong> et sélectionnez le gabarit approprié.</li> <li>Sélectionnez <strong>Copier template ID dans le presse-papier</strong>.</li></ol></div> <p><strong>Personnalisation (facultatif)</strong></p> <p>Utilisez <code>personalisation</code> si un gabarit comporte des champs réservés pour des renseignements personnalisés comme le nom ou le numéro de référence, vous devez fournir leurs valeurs dans un dictionnaire avec des paires de valeurs clés. Par exemple :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;personalisation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Amala&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;application_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-01-01&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Vous pouvez ignorer cet argument si un gabarit ne comporte pas de champs réservés pour les renseignements personnalisés.</p> <p><strong>Référence (facultatif)</strong></p> <p><code>reference</code> est un identificateur que vous pouvez créer au besoin. Cette référence identifie une seule notification ou un lot de notifications. Il ne doit contenir aucun renseignement personnel comme le nom ou l’adresse postale. Par exemple :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;reference&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span>
</code></pre></div><p>Vous pouvez ignorer cet argument si vous n’avez pas de référence.</p> <p><strong>ID de l'adresse courriel de réponse (facultatif)</strong></p> <p><code>email_reply_to_id</code> est une adresse de courriel que vous avez indiquée pour recevoir les réponses de vos utilisateurs. Vous devez ajouter au moins une adresse de courriel de réponse avant que votre service puisse être activé.</p> <p>Pour ajouter une adresse de courriel de réponse :</p> <ol><li><a href="https://notification.canada.ca/sign-in?lang=fr" target="_blank" rel="noopener noreferrer">Connectez-vous à Notification GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Accédez à la page <strong>Paramètres</strong>.</li> <li>Dans la section <strong>Courriel</strong>, sélectionnez <strong>Configurer</strong> à la ligne <strong>Adresses courriel de réponse</strong>.</li> <li>Sélectionnez <strong>Ajouter une adresse courriel de réponse</strong>.</li> <li>Entrez l’adresse de courriel que vous souhaitez utiliser, puis sélectionnez <strong>Ajouter</strong>.</li></ol> <p>Par exemple :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;email_reply_to_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8e222534-7f05-4972-86e3-17c5d9f894e2&quot;</span>
</code></pre></div><p>Vous pouvez ignorer cet argument si votre service n’a qu’une seule adresse de courriel de réponse ou si vous voulez utiliser l’adresse de courriel par défaut.</p> <h2 id="l-envoi-de-fichiers-par-courriel-est-une-fonctionnalite-unique-a-l-api"><a href="#l-envoi-de-fichiers-par-courriel-est-une-fonctionnalite-unique-a-l-api" class="header-anchor">#</a> L’envoi de fichiers par courriel est une fonctionnalité unique à l’API</h2> <p>Pour activer cette fonctionnalité, <a href="https://notification.canada.ca/sign-in?lang=fr" target="_blank" rel="noopener noreferrer">connectez-vous à Notification GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> et accédez à la section <strong>Paramètres</strong>.</p> <div class="custom-block tip"><p class="custom-block-title">Analyse antivirus</p> <p>Notification GC analyse les pièces jointes pour détecter d’éventuels logiciels malveillants avant l’envoi. Si un logiciel malveillant est détecté, Notification GC n’envoie pas la notification concernée et vous recevez un message d’erreur.</p></div> <h3 id="types-de-fichiers"><a href="#types-de-fichiers" class="header-anchor">#</a> Types de fichiers</h3> <p>Vous pouvez téléverser des fichiers aux formats .pdf, .csv, .jpeg, .png, .odt, .txt, .rtf, Microsoft Excel et Microsoft Word. Si vous avez besoin d’envoyer des fichiers de formats différents, veuillez nous contacter.</p> <h3 id="nombre-de-fichiers-et-volume-des-fichiers"><a href="#nombre-de-fichiers-et-volume-des-fichiers" class="header-anchor">#</a> Nombre de fichiers et volume des fichiers</h3> <p>Notification GC impose une limite de dix pièces jointes par notification courriel.</p> <p>Le volume du courriel, pièces jointes comprises, ne peut excéder 6 Mo.</p> <h3 id="vous-pouvez-envoyer-vos-fichiers-de-deux-facons-differentes"><a href="#vous-pouvez-envoyer-vos-fichiers-de-deux-facons-differentes" class="header-anchor">#</a> Vous pouvez envoyer vos fichiers de deux façons différentes</h3> <ol><li>En les joignant directement au courriel (pièce jointe)</li> <li>Sous la forme d’un lien unique permettant un téléchargement depuis le courriel (lien)</li></ol> <p>Vous avez le choix de la méthode d’envoi pour chaque appel d’API.</p> <h3 id="l-envoi-sous-forme-de-piece-jointe-est-generalement-preferable"><a href="#l-envoi-sous-forme-de-piece-jointe-est-generalement-preferable" class="header-anchor">#</a> L’envoi sous forme de pièce jointe est généralement préférable</h3> <p>Si vous optez pour un envoi sous forme de lien, Notification GC devra chiffrer et stocker le fichier. Nous supprimons les fichiers correspondants au bout de sept jours pour des raisons de confidentialité. Les destinataires qui cliqueraient sur le lien après cette période se verraient indiquer une erreur 404, ce qui signifie que le fichier est introuvable.</p> <p>À l’inverse, l’accès aux pièces jointes n’est pas limité dans le temps, à condition que le fournisseur de courriel des destinataires le permette. Il est également possible que les destinataires aient davantage l’habitude de recevoir des fichiers sous la forme de pièces jointes.</p> <h3 id="dans-certaines-situations-l-envoi-sous-forme-de-lien-peut-presenter-des-avantages"><a href="#dans-certaines-situations-l-envoi-sous-forme-de-lien-peut-presenter-des-avantages" class="header-anchor">#</a> Dans certaines situations, l’envoi sous forme de lien peut présenter des avantages</h3> <p>Certains fournisseurs de courriel et certaines règles de sécurité représentent des obstacles à l’envoi de pièces jointes. Il se peut par exemple que les ministères du gouvernement interdisent les pièces jointes dans le cadre de la communication interne.</p> <p>Avant de choisir votre méthode d’envoi, effectuez des tests afin de vérifier quelle méthode se prête le mieux à votre cas. Vous pouvez également <a href="https://notification.canada.ca/contact?lang=fr" target="_blank" rel="noopener noreferrer">nous contacter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="televerser-votre-fichier"><a href="#televerser-votre-fichier" class="header-anchor">#</a> Téléverser votre fichier</h3> <p>Pour téléverser des fichiers, passez un dictionnaire de paramètres dans la clé <code>personalisation</code>. Renseignez ce paramètre dans la clé associée à votre champ réservé dans votre gabarit, ou utilisez un nom de votre choix.</p> <p>Vous devrez renseigner :</p> <ul><li><code>file</code> : convertissez votre fichier en chaîne de caractères encodée en base64. Exemple : <code>Q2FuYWRh</code> (<code>Canada</code> encodé en base64)</li> <li><code>filename</code> : le nom de votre fichier que vous envoyez. Exemple : <code>nom_service_nom_personne.pdf</code></li> <li><code>sending_method</code> : la méthode d’envoi pour ce fichier. Indiquez soit <code>attach</code> pour la méthode d’envoi par pièce jointe ou <code>link</code> pour la méthode d’envoi par lien unique</li></ul> <h4 id="si-vous-envoyez-des-fichiers-en-tant-que-pieces-jointes"><a href="#si-vous-envoyez-des-fichiers-en-tant-que-pieces-jointes" class="header-anchor">#</a> Si vous envoyez des fichiers en tant que pièces jointes</h4> <p>Spécifiez <code>attach</code> en tant que <code>sending_method</code>.</p> <p>Par exemple :</p> <p><strong>Gabarit</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Bonjour ((nom)),

Nous avons reçu vos document le ((date)).

Vous trouverez votre demande en pièce jointe.
</code></pre></div><p><strong>Paramètres HTTP</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;personalisation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;nom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Amala&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-01-01&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fichier&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fichier encodé en base64&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;filename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;votre_nom_de_fichier.pdf&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sending_method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;attach&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Voici un exemple d’envoi de plusieurs fichiers :</p> <p><strong>Paramètres HTTP</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;personalisation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;nom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Amala&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-01-01&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fichier&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fichier encodé en base64&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;filename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;votre_nom_de_fichier_personnalisé.txt&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sending_method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;attach&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fichier2&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;autre fichier encodé en base64&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;filename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fichier2.txt&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sending_method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;attach&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fichier3&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fichier3 encodé en base64&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;filename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fichier3.txt&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sending_method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;attach&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="si-vous-envoyez-des-fichiers-en-tant-que-liens-uniques"><a href="#si-vous-envoyez-des-fichiers-en-tant-que-liens-uniques" class="header-anchor">#</a> Si vous envoyez des fichiers en tant que liens uniques</h4> <ol><li>Ajouter un espace réservé dans votre gabarit</li> <li>Envoyez des requêtes HTTP, spécifiez <code>link</code> en tant que <code>sending_method</code></li></ol> <p><strong>Ajouter un espace réservé au gabarit</strong></p> <ol><li><a href="https://notification.canada.ca/sign-in?lang=fr" target="_blank" rel="noopener noreferrer">Connectez-vous à Notification GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Accédez à la page <strong>Gabarits</strong> et sélectionnez le gabarit de courriel approprié.</li> <li>Sélectionnez <strong>Modifier</strong>.</li> <li>Ajoutez un espace réservé au gabarit de courriel à l’aide de parenthèses doubles. Par exemple : <code>((lien_vers_fichier))</code></li></ol> <div class="language- extra-class"><pre class="language-text"><code>Vous pouvez télécharger [votre document](((lien_vers_fichier))).
</code></pre></div><p>Par exemple :</p> <p><strong>Gabarit</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Bonjour ((nom)),

Nous avons reçu vos document le ((date)).

Vous pouvez télécharger [votre document](((lien_vers_fichier))).
</code></pre></div><p><strong>Paramètres HTTP</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;personalisation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;nom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Amala&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-01-01&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lien_vers_fichier&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fichier encodé en base64&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;filename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;votre_nom_de_fichier.pdf&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sending_method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;link&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="reponse"><a href="#reponse" class="header-anchor">#</a> Réponse</h3> <p>Si la demande au client est acceptée, le client renvoie un <code>dict</code> :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;740e5834-3a29-46b4-9a6f-16142fde533a&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;reference&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;subject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TEXTE DE L’OBJET&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;body&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;TEXTE DU MESSAGE&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;from_email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ADRESSE DE COURRIEL DE L’EXPÉDITEUR&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.notification.canada.ca/v2/notifications/740e5834-3a29-46b4-9a6f-16142fde533a&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;template&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f33517ff-2a88-4f6e-b855-c550268ce08a&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.notification.canada.ca/v2/template/f33517ff-2a88-4f6e-b855-c550268ce08a&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="codes-d-erreur"><a href="#codes-d-erreur" class="header-anchor">#</a> Codes d’erreur</h3> <p>Si la requête échoue, le corps de la réponse est au format <code>json</code> avec les clés suivantes:</p> <ul><li><code>status_code</code> avec le code de statut sous forme d'entier,</li> <li><code>errors</code> avec un tableau d'objets. Chaque objet possède 2 clés supplémentaires, l'une étiquetée <code>error</code> et l'autre étiquetée <code>message</code>.</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;errors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BadRequestError&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Le message d'erreur.&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ValidationError&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Le message d'erreur.&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status_code&quot;</span><span class="token operator">:</span> <span class="token number">400</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Noter</p> <p>Les messages d'erreur renvoyés par l'API sont uniquement en anglais.</p></div> <p>Le tableau ci-dessous présente les codes de statut et des exemples d'objets d'erreur.</p> <table><thead><tr><th style="text-align:left;">status_code</th> <th style="text-align:left;">message</th> <th style="text-align:left;">Comment réparer</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Can't send to this recipient using a team-only API key&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Utiliser le bon type de <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/cles.html">clé API</a></td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Can't send to this recipient when service is in trial mode</code><br><code>}]</code></td> <td style="text-align:left;">Votre service ne peut pas envoyer cette notification en mode d’essai. Activez votre service dans les paramètres.</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Unsupported file type '(FILE TYPE)'. Supported types are: '(ALLOWED TYPES)&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Mauvais type de fichier. Vous ne pouvez télécharger que des fichiers .pdf, .csv, .txt, .jpeg, .png, .doc, .docx, .xls, .xlsx, .rtf ou .odt</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;File did not pass the virus scan&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Le fichier contient un virus</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;sending_method is a required property&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Indiquer soit <code>attach</code> pour une pièce jointe ou <code>link</code> pour un lien unique comme méthode d'envoi</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;filename is a required property&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Précisez le nom du fichier que vous envoyez</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;personalisation (key) is not one of [attach, link]&quot;</code><br><code>}]</code></td> <td style="text-align:left;">La méthode d'envoi précisée doit être soit <code>attach</code> pour une pièce jointe ou <code>link</code> pour un lien unique</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;(key) : Incorrect padding : Error decoding base64 field&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Le fichier doit être converti en une chaîne de caractères encodée en base64</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;filename is too short&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Le nom du fichier doit comporter au moins 3 caractères</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;filename is too long&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Le nom du fichier doit comporter moins de 250 caractères</td></tr> <tr><td style="text-align:left;"><code>403</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;AuthError&quot;,</code><br><code>&quot;message&quot;: &quot;Error: Your system clock must be accurate to within 30 seconds&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez votre horloge système</td></tr> <tr><td style="text-align:left;"><code>403</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;AuthError&quot;,</code><br><code>&quot;message&quot;: &quot;Invalid token: API key not found&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Utilisez la bonne <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/cles.html">clé API</a></td></tr> <tr><td style="text-align:left;"><code>429</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;RateLimitError&quot;,</code><br><code>&quot;message&quot;: &quot;Exceeded rate limit for key type TEAM/TEST/LIVE of 1000 requests per 60 seconds&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Reportez-vous à <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/limites.html">Débits maximaux API</a> pour plus de renseignements</td></tr> <tr><td style="text-align:left;"><code>429</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;TooManyRequestsError&quot;,</code><br><code>&quot;message&quot;: &quot;Exceeded send limits (LIMIT NUMBER) for today&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Reportez-vous à <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/limites.html">limites du service</a> pour le nombre maximal</td></tr> <tr><td style="text-align:left;"><code>500</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;Exception&quot;,</code><br><code>&quot;message&quot;: &quot;Internal server error&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Notification GC n’a pas pu traiter la demande, renvoyez votre notification.</td></tr></tbody></table> <h2 id="envoyer-un-message-texte"><a href="#envoyer-un-message-texte" class="header-anchor">#</a> Envoyer un message texte</h2> <div class="language- extra-class"><pre class="language-text"><code>POST /v2/notifications/sms
</code></pre></div><h3 id="corps-de-la-requete-2"><a href="#corps-de-la-requete-2" class="header-anchor">#</a> Corps de la requête</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;phone_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;+19021234567&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;template_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f33517ff-2a88-4f6e-b855-c550268ce08a&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="parametres-2"><a href="#parametres-2" class="header-anchor">#</a> Paramètres</h3> <p><strong>Numéro de téléphone (obligatoire)</strong></p> <p><code>phone_number</code> est le numéro de téléphone du destinataire du message texte.</p> <div class="content__default"><p><strong>ID du gabarit (obligatoire)</strong></p> <p>Pour rechercher <code>template_id</code> (ID du gabarit) :</p> <ol><li><a href="https://notification.canada.ca/sign-in?lang=fr" target="_blank" rel="noopener noreferrer">Connectez-vous à Notification GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Accédez à la page <strong>Gabarits</strong> et sélectionnez le gabarit approprié.</li> <li>Sélectionnez <strong>Copier template ID dans le presse-papier</strong>.</li></ol></div> <p><strong>Personnalisation (facultatif)</strong></p> <p>Utilisez <code>personalisation</code> si un gabarit comporte des champs réservés pour des renseignements personnalisés comme le nom ou le numéro de référence, vous devez fournir leurs valeurs dans un dictionnaire avec des paires de valeurs clés. Par exemple :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;personalisation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Amala&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;application_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-01-01&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Vous pouvez ignorer cet argument si un gabarit ne comporte pas de champs réservés pour les renseignements personnalisés.</p> <p><strong>Référence (facultatif)</strong></p> <p><code>reference</code> est un identificateur que vous pouvez créer au besoin. Cette référence identifie une seule notification ou un lot de notifications. Il ne doit contenir aucun renseignement personnel comme le nom ou l’adresse postale. Par exemple :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;reference&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span>
</code></pre></div><p>Vous pouvez ignorer cet argument si vous n’avez pas de référence.</p> <p><strong>Expéditeur du message texte (facultatif)</strong></p> <p><code>sms_sender_id</code> est un identificateur unique de l’expéditeur de la notification par message texte.</p> <p>Pour rechercher l’expéditeur du message texte :</p> <ol><li><a href="https://notification.canada.ca/sign-in?lang=fr" target="_blank" rel="noopener noreferrer">Connectez-vous à Notification GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Accédez à la page <strong>Paramètres</strong>.</li> <li>Dans la section <strong>Messages texte</strong>, sélectionnez <strong>Configurer</strong> à la ligne <strong>Expéditeurs de messages texte</strong>.</li></ol> <p>Ensuite, vous pouvez soit :</p> <ul><li>copier l’ID de l’expéditeur que vous souhaitez utiliser et le coller dans la méthode</li> <li>sélectionner <strong>Modifier</strong> pour modifier l’expéditeur par défaut que le service utilisera, et sélectionnez <strong>Enregistrer</strong>.</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;sms_sender_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8e222534-7f05-4972-86e3-17c5d9f894e2&quot;</span>
</code></pre></div><p>Vous pouvez ignorer cet argument si votre service n’a qu’un seul expéditeur de message texte, ou si vous voulez utiliser l’expéditeur par défaut.</p> <h3 id="reponse-2"><a href="#reponse-2" class="header-anchor">#</a> Réponse</h3> <p>Si la demande est acceptée, le corps de la réponse est <code>json</code> avec un code de statut de <code>201</code> :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;740e5834-3a29-46b4-9a6f-16142fde533a&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;reference&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;body&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;TEXTE DU MESSAGE&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;from_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EXPÉDITEUR&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.notification.canada.ca/v2/notifications/740e5834-3a29-46b4-9a6f-16142fde533a&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;template&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f33517ff-2a88-4f6e-b855-c550268ce08a&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.notification.canada.ca/v2/template/ceb50d92-100d-4b8b-b559-14fa3b091cd&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Si vous utilisez la <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/cles.html">clé API de test</a>, tous vos messages reviendront avec le statut &quot;livré&quot;.</p> <p>Tous les messages envoyés à l’aide des clés équipe et liste de confiance ou active apparaîtront dans votre tableau de bord.</p> <h3 id="codes-d-erreur-2"><a href="#codes-d-erreur-2" class="header-anchor">#</a> Codes d’erreur</h3> <p>Si la demande a été refusée, le corps de la réponse est <code>json</code>, consultez le tableau ci-dessous pour plus de détails.</p> <table><thead><tr><th style="text-align:left;">status_code</th> <th style="text-align:left;">message</th> <th style="text-align:left;">Comment réparer</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Can't send to this recipient using a team-only API key&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Utiliser le bon type de <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/cles.html">clé API</a></td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Can't send to this recipient when service is in trial mode&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Votre service ne peut pas envoyer cette notification en mode d’essai. Activez votre service dans les paramètres.</td></tr> <tr><td style="text-align:left;"><code>403</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;AuthError&quot;,</code><br><code>&quot;message&quot;: &quot;Error: Your system clock must be accurate to within 30 seconds&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez votre horloge système</td></tr> <tr><td style="text-align:left;"><code>403</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;AuthError&quot;,</code><br><code>&quot;message&quot;: &quot;Jeton non valide : Clé API introuvable&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Utilisez la bonne <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/cles.html">clé API</a>.</td></tr> <tr><td style="text-align:left;"><code>429</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;RateLimitError&quot;,</code><br><code>&quot;message&quot;: &quot;Exceeded rate limit for key type TEAM/TEST/LIVE of 1000 requests per 60 seconds&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Reportez-vous à <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/limites.html">Débits maximaux API</a> pour plus de renseignements</td></tr> <tr><td style="text-align:left;"><code>429</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;TooManyRequestsError&quot;,</code><br><code>&quot;message&quot;: &quot;Exceeded send limits (LIMIT NUMBER) for today&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Reportez-vous à <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/limites.html">limites du service</a> pour le nombre maximal</td></tr> <tr><td style="text-align:left;"><code>500</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;Exception&quot;,</code><br><code>&quot;message&quot;: &quot;Internal server error&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Notification GC n’a pas pu traiter la demande, renvoyez votre notification.</td></tr></tbody></table> <h2 id="envoyer-des-notifications-de-masse"><a href="#envoyer-des-notifications-de-masse" class="header-anchor">#</a> Envoyer des notifications de masse</h2> <div class="language- extra-class"><pre class="language-text"><code>POST /v2/notifications/bulk
</code></pre></div><p>Envoyer des notifications de masse, jusqu'à 50 000 destinataires à la fois, pour un gabarit unique. Vous pouvez programmer l'envoi de notifications jusqu'à 4 jours à l'avance.</p> <h3 id="corps-de-la-requete-3"><a href="#corps-de-la-requete-3" class="header-anchor">#</a> Corps de la requête</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Nom de l'envoi de masse&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;template_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f33517ff-2a88-4f6e-b855-c550268ce08a&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rows&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;email address&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;nom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;alice@example.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;bob@example.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scheduled_for&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-06-08T15:15:00&quot;</span><span class="token punctuation">,</span> # chaîne facultative
  <span class="token property">&quot;reply_to_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f025b1a9-63af-43e8-b969-627bfe544bba&quot;</span> # chaîne facultative
<span class="token punctuation">}</span>
</code></pre></div><h3 id="parametres-3"><a href="#parametres-3" class="header-anchor">#</a> Paramètres</h3> <p><strong>nom (obligatoire)</strong></p> <p><code>name</code> est le nom de votre envoi de masse. Il est utilisé pour identifier votre envoi.</p> <div class="content__default"><p><strong>ID du gabarit (obligatoire)</strong></p> <p>Pour rechercher <code>template_id</code> (ID du gabarit) :</p> <ol><li><a href="https://notification.canada.ca/sign-in?lang=fr" target="_blank" rel="noopener noreferrer">Connectez-vous à Notification GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Accédez à la page <strong>Gabarits</strong> et sélectionnez le gabarit approprié.</li> <li>Sélectionnez <strong>Copier template ID dans le presse-papier</strong>.</li></ol></div> <p><strong>lignes (obligatoire)</strong></p> <p><code>rows</code> est une liste de listes. La première ligne est l'en-tête et doit comprendre au moins <code>email address</code> si vous envoyez un gabarit de courriel ou <code>phone number</code> si vous envoyez un gabarit de message texte. Les autres colonnes doivent correspondre aux champs réservés pour des renseignements personnalisés de votre gabarit.</p> <p>Les lignes suivantes doivent inclure les informations de vos destinataires et doivent correspondre à l'ordre des colonnes de l'en-tête. Vous pouvez avoir entre 1 et 50 000 destinataires.</p> <h4 id="parametres-optionnels"><a href="#parametres-optionnels" class="header-anchor">#</a> Paramètres optionnels</h4> <p><strong>envoi programmé (optionnel)</strong></p> <p><code>scheduled_for</code> peut être renseigné si vous souhaitez envoyer des notifications dans le futur, vous pouvez spécifier une date et une heure jusqu'à 4 jours dans le futur au <a href="https://fr.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">format ISO 8601<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Par exemple : <code>2021-06-08T15:15:00</code> (heure UTC).</p> <p><strong>identifiant de l'expéditeur (optionnel)</strong></p> <p><code>reply_to_id</code> peut être renseigné si vous souhaitez utiliser une adresse de courriel pour recevoir les réponses spécifiques, vous pouvez indiquer indiquer l'identifiant de l'adresse courriel de réponse.</p> <p>Pour trouver l'identifiant de votre addresse courriel de réponse :</p> <ol><li><a href="https://notification.canada.ca/sign-in?lang=fr" target="_blank" rel="noopener noreferrer">Connectez-vous à Notification GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Allez dans la page <strong>Paramètres</strong>.</li> <li>Dans la section <strong>Courriel</strong>, sélectionnez <strong>Adresses courriel de réponse</strong></li> <li>Copiez l'identifiant de l'adresse que vous souhaitez utiliser</li></ol> <p>Par défaut, Notification GC utilisera votre adresse de courriel de réponse par défaut si vous n'en spécifiez pas, ou aucune si vous n'avez pas configuré cette fonctionnalité.</p> <p><strong>csv (optionnel)</strong></p> <p><code>csv</code> peut être renseigné si vous préférez passer le contenu d'un fichier CSV plutôt que des lignes dans le paramètre <code>rows</code>. Passez le contenu complet de votre fichier CSV dans une clé nommée <code>csv</code>. Ne passez pas le paramètre <code>rows</code>.</p> <p>Par exemple :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Nom de l'envoi de masse&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;template_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f33517ff-2a88-4f6e-b855-c550268ce08a&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;csv&quot;</span><span class="token operator">:</span> <span class="token string">&quot;email address,nom\nalice@example.com,Alice&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="reponse-3"><a href="#reponse-3" class="header-anchor">#</a> Réponse</h3> <div class="custom-block warning"><p class="custom-block-title">Délai d'attente de la réponse</p> <p>Si vous spécifiez un délai d'attente de la réponse lors de votre appel HTTP, assurez-vous qu'il soit défini à 15 secondes. L'API Notification GC pourrait prendre quelques secondes pour valider votre requête et sauvegarder vos paramètres si votre envoi de masse comporte beaucoup de destinataires.</p></div> <p>Si la demande est acceptée, le corps de la réponse est <code>json</code> avec un code de statut de <code>201</code> :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;api_key&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;de1fafa2-fb2a-49c5-9b9a-8400727ecd29&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;key_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;team&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Clé test&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;archived&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;created_at&quot;</span><span class="token operator">:</span><span class="token string">&quot;2021-06-10T17:14:15.341308+00:00&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;created_by&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;6af522d0-2915-4e52-83a3-3690455a5fe6&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Notify service user&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;0ea216ae-4b03-46b7-ab44-893ae85104f5&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;job_status&quot;</span><span class="token operator">:</span><span class="token string">&quot;pending&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;notification_count&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;original_file_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Nom de l'envoi de masse&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;processing_finished&quot;</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;processing_started&quot;</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;scheduled_for&quot;</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sender_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;f025b1a9-63af-43e8-b969-627bfe544bba&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;service&quot;</span><span class="token operator">:</span><span class="token string">&quot;afa2be3b-1250-430f-a70f-28a1a9d49dfa&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;service_name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Test service&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;template&quot;</span><span class="token operator">:</span><span class="token string">&quot;f33517ff-2a88-4f6e-b855-c550268ce08a&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;template_version&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;updated_at&quot;</span><span class="token operator">:</span><span class="token null keyword">null</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Vous pouvez suivre la progression de votre envoi de masse dans l'interface de Notification GC.</p> <p>Si vous avez programmé votre envoi, vous pouvez l'annuler dans l'interface web.</p> <h3 id="codes-d-erreur-3"><a href="#codes-d-erreur-3" class="header-anchor">#</a> Codes d’erreur</h3> <p>Si la demande a été refusée, le corps de la réponse est <code>json</code>, consultez le tableau ci-dessous pour plus de détails.</p> <table><thead><tr><th style="text-align:left;">Code HTTP</th> <th style="text-align:left;">message</th> <th style="text-align:left;">Comment réparer</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;You should specify either rows or csv&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Passez les données au moyen de <code>rows</code> ou <code>csv</code></td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;name is a required property&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Spécifiez le paramètre <code>name</code></td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;scheduled_for 42 is not of type string, null&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez que vous passez une <a href="https://fr.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">date au format ISO 8601<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;scheduled_for datetime cannot be in the past&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez que vous passez une date future</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;scheduled_for datetime can only be up to 96 hours in the future&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez que votre date est au plus 4 jours dans le futur</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;scheduled_for datetime format is invalid. It must be a valid ISO8601 date time format, https://en.wikipedia.org/wiki/ISO_8601&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez que vous passez une <a href="https://fr.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">date au format ISO 8601<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Template not found&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Mettez à jour l'identifiant de gabarit</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Template has been deleted&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Créez un nouveau gabarit et renseignez son identifiant</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Service is not allowed to send emails&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Activez l'envoi de courriels dans les Paramètres</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Missing column headers: name&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Ajoutez l'en-tête manquant</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Duplicate column headers: name, NAME&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Retirez l'en-tête en doublon</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Too many rows. Maximum number of rows allowed is 50000&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Renseignez moins de 50 000 lignes</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>{&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;You cannot send to these recipients because you used a team and safelist API key.&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Demandez d'activer votre service dans les Paramètres ou utilisez une <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/cles.html">clé d'API active</a></td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;You cannot send to these recipients because your service is in trial mode. You can only send to members of your team and your safelist.&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Ajoutez des membres à votre équipe, mettez à jour votre liste de confiance ou demandez d'activer votre service</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;You only have 50 remaining messages before you reach your daily limit. You've tried to send 75 messages.&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Retirez les lignes en surplus, essayez à nouveau demain ou demander une augmentation de limites</td></tr> <tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;BadRequestError&quot;,</code><br><code>&quot;message&quot;: &quot;Some rows have errors. Row 1 - name: Missing. Row 2 - email address: invalid recipient. Row 3 - name: Missing. Row 4 - name: Missing.&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Assurez-vous que les lignes n'ont pas de valeurs manquantes</td></tr> <tr><td style="text-align:left;"><code>500</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;Exception&quot;,</code><br><code>&quot;message&quot;: &quot;Internal server error&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Notification GC n’a pas pu traiter la demande. Renvoyez votre notification.</td></tr></tbody></table> <h2 id="curl-example"><a href="#curl-example" class="header-anchor">#</a> CURL Example</h2> <p>L'exemple pour envoyer une seule notification</p> <div class="language- extra-class"><pre class="language-text"><code>curl --request POST \
  --url https://api.notification.canada.ca/v2/notifications/email \
  --header 'Authorization: ApiKey-v1 VOTRE_CLÉ_API' \
  --header 'Content-Type: application/json' \
  --header 'base_url: https:///notification.canada.ca' \
  --data '{
        &quot;email_address&quot;: &quot;ADRESSE_EMAIL_POUR_ENVOYER_LA_NOTIFICATION&quot;,
        &quot;template_id&quot;: &quot;ID_MODÈLE&quot;
}'
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/cds-snc/notification-documentation/edit/main/src/fr/envoyer.md" target="_blank" rel="noopener noreferrer">Modifier cette page sur GitHub (ouvre dans un nouvel onglet)</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Dernière mise à jour :</span> <span class="time">2025-06-16</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/commencer.html" class="prev">
        Pour commencer
      </a></span> <span class="next"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/fr/etat.html">
        Obtenir l’état du message
      </a>
      →
    </span></p></div> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/app.f2075de5.js" defer></script><script src="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/3.53dc4691.js" defer></script><script src="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/1.b9e473a4.js" defer></script><script src="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/29.a9403534.js" defer></script><script src="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/9f6d84/assets/js/42.ebb76093.js" defer></script>
  </body>
</html>
