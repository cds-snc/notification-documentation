(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{268:function(t,e,a){"use strict";var s=a(21),r=a(5),n=a(113),o=a(14),p=a(2),i=a(31),l=a(12),v=a(32)("find",TypeError);s({target:"Iterator",proto:!0,real:!0,forced:v},{find:function(t){p(this);try{o(t)}catch(t){l(this,"throw",t)}if(v)return r(v,this,t);var e=i(this),a=0;return n(e,(function(e,s){if(t(e,a++))return s(e)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},470:function(t,e,a){"use strict";a.r(e);a(112),a(268);var s=a(4),r=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"send-a-message"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#send-a-message"}},[t._v("#")]),t._v(" Send a message")]),t._v(" "),e("p",[t._v("You can use GC Notify to send emails and text messages. These might be in response to a user-generated event, like a receipt after they apply to your service, or as a reminder when a payment is due.")]),t._v(" "),e("p",[e("strong",[t._v("What you'll need:")])]),t._v(" "),e("p",[t._v("To send a message with GC Notify, you'll need to set up a template in the user interface.")]),t._v(" "),e("p",[t._v("To create a template:")]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://notification.canada.ca/sign-in",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sign in to GC Notify"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("li",[t._v("Go to the "),e("strong",[t._v("Templates")]),t._v(" page.")]),t._v(" "),e("li",[t._v("Select "),e("strong",[t._v("New template")]),t._v(".")])]),t._v(" "),e("p",[t._v("Once you've got a template ready, find the template ID associated with it. You'll need that ID to specify which template you want to use when you call the API.")]),t._v(" "),e("p",[t._v("Your API call must also include any fields that have been set up as personalisations. Personalisation allows you to change what shows up in a specific message as it gets sent out. You might use personalisation to:")]),t._v(" "),e("ul",[e("li",[t._v("Address a user by their name")]),t._v(" "),e("li",[t._v("Provide users with a specific link to click")]),t._v(" "),e("li",[t._v("Send a unique transaction number as a follow up")]),t._v(" "),e("li",[t._v("Give users a dynamically generated list of actions they need to take")])]),t._v(" "),e("h2",{attrs:{id:"check-status-repair-and-resend-messages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#check-status-repair-and-resend-messages"}},[t._v("#")]),t._v(" Check status, repair and resend messages")]),t._v(" "),e("p",[t._v("If your HTTP requests receive a:")]),t._v(" "),e("ol",[e("li",[t._v("4xx class error for an invalid request.")]),t._v(" "),e("li",[t._v("5xx class error for server failure.")])]),t._v(" "),e("p",[t._v("GC Notify treats these errors as unprocessed requests. Resend these requests so we can process them.")]),t._v(" "),e("p",[t._v("Requests must receive 2xx class success in order for GC Notify to retry until sending is done. Restrict requests to GC Notify’s API to 1000 per minute. You’ll get a 429 error if you exceed this number.")]),t._v(" "),e("h2",{attrs:{id:"sending-an-email"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sending-an-email"}},[t._v("#")]),t._v(" Sending an email")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("POST /v2/notifications/email\n")])])]),e("h3",{attrs:{id:"request-body"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-body"}},[t._v("#")]),t._v(" Request body")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email_address"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sender@something.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f33517ff-2a88-4f6e-b855-c550268ce08a"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"arguments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#arguments"}},[t._v("#")]),t._v(" Arguments")]),t._v(" "),e("p",[e("strong",[t._v("email_address (required)")])]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("email_address")]),t._v(" of the recipient.")]),t._v(" "),e("Content",{attrs:{"page-key":t.$site.pages.find(t=>"en/_arg_template_id.md"===t.relativePath).key}}),t._v(" "),e("p",[e("strong",[t._v("personalisation (optional)")])]),t._v(" "),e("p",[t._v("Use "),e("code",[t._v("personalisation")]),t._v(" if a template has placeholder fields for personalised information such as name or reference number, you need to provide their values in a dictionary with key value pairs. For example:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"personalisation"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"first_name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Amala"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"application_date"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-01-01"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("You can leave out this argument if a template does not have any placeholder fields for personalised information.")]),t._v(" "),e("p",[e("strong",[t._v("reference (optional)")])]),t._v(" "),e("p",[e("code",[t._v("reference")]),t._v(" is an identifier you can create if necessary. This reference identifies a single notification or a batch of notifications. It must not contain any personal information such as name or mailing address. For example:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reference"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"STRING"')]),t._v("\n")])])]),e("p",[t._v("You can leave out this argument if you do not have a reference.")]),t._v(" "),e("p",[e("strong",[t._v("email_reply_to_id (optional)")])]),t._v(" "),e("p",[e("code",[t._v("email_reply_to_id")]),t._v(" is an email address specified by you to receive replies from your users.")]),t._v(" "),e("p",[t._v("To add a reply-to email address:")]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://notification.canada.ca/sign-in",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sign in to GC Notify"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("li",[t._v("Go to the "),e("strong",[t._v("Settings")]),t._v(" page.")]),t._v(" "),e("li",[t._v("In the "),e("strong",[t._v("Email")]),t._v(" section, select "),e("strong",[t._v("Manage")]),t._v(" on the "),e("strong",[t._v("Reply-to email addresses")]),t._v(" row.")]),t._v(" "),e("li",[t._v("Select "),e("strong",[t._v("Add reply-to address")]),t._v(".")]),t._v(" "),e("li",[t._v("Enter the email address you want to use, and select "),e("strong",[t._v("Add")]),t._v(".")])]),t._v(" "),e("p",[t._v("For example:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email_reply_to_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8e222534-7f05-4972-86e3-17c5d9f894e2"')]),t._v("\n")])])]),e("p",[t._v("You can leave out this argument if your service only has one reply-to email address, or you want to use the default email address.")]),t._v(" "),e("h2",{attrs:{id:"sending-files-by-email-is-an-api-only-feature"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sending-files-by-email-is-an-api-only-feature"}},[t._v("#")]),t._v(" Sending files by email is an API-only feature")]),t._v(" "),e("p",[t._v("To turn on this feature, "),e("a",{attrs:{href:"https://notification.canada.ca/sign-in",target:"_blank",rel:"noopener noreferrer"}},[t._v("sign in to GC Notify"),e("OutboundLink")],1),t._v(" and go to the "),e("strong",[t._v("Settings")]),t._v(" page.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Malware scanning")]),t._v(" "),e("p",[t._v("GC Notify scans file attachments for malware before sending. If malware is detected, GC Notify will not sent the notification and you’ll receive an error message.")])]),t._v(" "),e("h3",{attrs:{id:"file-types"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#file-types"}},[t._v("#")]),t._v(" File types")]),t._v(" "),e("p",[t._v("You can upload .pdf, .csv, .jpeg, .png, .odt, .txt, .rtf, as well as Microsoft Excel and Microsoft Word files. If you need to send other file types, "),e("a",{attrs:{href:"https://notification.canada.ca/contact",target:"_blank",rel:"noopener noreferrer"}},[t._v("contact us"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"file-quantity-and-size"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#file-quantity-and-size"}},[t._v("#")]),t._v(" File quantity and size")]),t._v(" "),e("p",[t._v("GC Notify allows a maximum of 10 file attachments per email notification.")]),t._v(" "),e("p",[t._v("The email’s size, including accompanying files, cannot exceed 6MB.")]),t._v(" "),e("h3",{attrs:{id:"you-can-send-files-in-2-ways"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#you-can-send-files-in-2-ways"}},[t._v("#")]),t._v(" You can send files in 2 ways")]),t._v(" "),e("ol",[e("li",[t._v("Directly attached to the email (attachment mode).")]),t._v(" "),e("li",[t._v("As a unique link, to download from the email (link mode).")])]),t._v(" "),e("p",[t._v("You control the sending method on every API call.")]),t._v(" "),e("h3",{attrs:{id:"attachments-are-generally-preferable"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#attachments-are-generally-preferable"}},[t._v("#")]),t._v(" Attachments are generally preferable")]),t._v(" "),e("p",[t._v("If you use link mode, GC Notify needs to encrypt and store the file. For privacy reasons, we delete the file after 7 days. After deletion, recipients get a 404 “File not found” error when they select the link.")]),t._v(" "),e("p",[t._v("In contrast, recipients can access attachments indefinitely, if permitted by their email provider. They may also be more familiar with receiving files as attachments.")]),t._v(" "),e("h3",{attrs:{id:"in-some-situations-there-may-be-advantages-to-link-mode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#in-some-situations-there-may-be-advantages-to-link-mode"}},[t._v("#")]),t._v(" In some situations, there may be advantages to link mode")]),t._v(" "),e("p",[t._v("Some email providers and security rules block attachments. For example, government departments may restrict attachments for internal communication.")]),t._v(" "),e("p",[t._v("Before choosing a sending method, perform tests to check what works best for your use case. You can also "),e("a",{attrs:{href:"https://notification.canada.ca/contact",target:"_blank",rel:"noopener noreferrer"}},[t._v("contact us"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"upload-your-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upload-your-file"}},[t._v("#")]),t._v(" Upload your file")]),t._v(" "),e("p",[t._v("To send files, pass a dictionary in the "),e("code",[t._v("personalisation")]),t._v(" argument. Pass this dictionary to the placeholder key if it’s present in your template or use a name of your choice.")]),t._v(" "),e("p",[t._v("You’ll need to specify:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("file")]),t._v(": convert the file into a string that is base64 encoded. Example: "),e("code",[t._v("Q2FuYWRh")]),t._v(" ("),e("code",[t._v("Canada")]),t._v(" encoded in base64)")]),t._v(" "),e("li",[e("code",[t._v("filename")]),t._v(": the filename of the file you are sending. Example: "),e("code",[t._v("service_name_applicant_name.pdf")])]),t._v(" "),e("li",[e("code",[t._v("sending_method")]),t._v(": specify how you want to send this file. Either "),e("code",[t._v("attach")]),t._v(" for the direct attachment method or "),e("code",[t._v("link")]),t._v(" to generate a unique link")])]),t._v(" "),e("h4",{attrs:{id:"if-you-re-sending-files-as-direct-attachments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#if-you-re-sending-files-as-direct-attachments"}},[t._v("#")]),t._v(" If you’re sending files as direct attachments")]),t._v(" "),e("p",[t._v("Specify "),e("code",[t._v("attach")]),t._v(" as "),e("code",[t._v("sending_method")]),t._v(".")]),t._v(" "),e("p",[t._v("For example:")]),t._v(" "),e("p",[e("strong",[t._v("Template")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Hello ((first_name)),\n\nWe received your application on ((application_date)).\n\nYou will find your application attached.\n")])])]),e("p",[e("strong",[t._v("HTTP parameters")])]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"personalisation"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"first_name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Amala"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"application_date"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-01-01"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"application_file"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"file"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file as base64 encoded string"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"filename"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"your_custom_filename.pdf"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sending_method"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attach"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Below is an example of sending multiple files:")]),t._v(" "),e("p",[e("strong",[t._v("HTTP parameters")])]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"personalisation"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"application_file"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"file"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file as base64 encoded string"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"filename"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"your_custom_filename.txt"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sending_method"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attach"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"other_file"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"file"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"other file as base64 encoded string"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"filename"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file2.txt"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sending_method"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attach"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"file_3"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"file"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file3 as base64 encoded string"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"filename"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file3.txt"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sending_method"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attach"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h4",{attrs:{id:"if-you-re-sending-files-as-unique-links"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#if-you-re-sending-files-as-unique-links"}},[t._v("#")]),t._v(" If you’re sending files as unique links")]),t._v(" "),e("ol",[e("li",[t._v("Add a placeholder to the email template")]),t._v(" "),e("li",[t._v("Send HTTP requests, specify "),e("code",[t._v("link")]),t._v(" as "),e("code",[t._v("sending_method")])])]),t._v(" "),e("p",[e("strong",[t._v("Add a placeholder to the template")])]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://notification.canada.ca/sign-in",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sign in to GC Notify"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("li",[t._v("Go to the "),e("strong",[t._v("Templates")]),t._v(" page and select the relevant email template.")]),t._v(" "),e("li",[t._v("Select "),e("strong",[t._v("Edit")]),t._v(".")]),t._v(" "),e("li",[t._v("Add a placeholder to the email template using double brackets. For example: "),e("code",[t._v("((link_to_file))")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("You can [now download your application](((link_to_file))).\n")])])]),e("p",[t._v("For example:")]),t._v(" "),e("p",[e("strong",[t._v("Template")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Hello ((first_name)),\n\nWe received your application on ((application_date)).\n\nYou can [now download your application](((link_to_file))).\n")])])]),e("p",[e("strong",[t._v("HTTP parameters")])]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"personalisation"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"first_name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Amala"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"application_date"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-01-01"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"link_to_file"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"file"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file as base64 encoded string"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"filename"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"your_custom_filename.pdf"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sending_method"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"response"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response"}},[t._v("#")]),t._v(" Response")]),t._v(" "),e("p",[t._v("If the request to the client is successful, the client returns a "),e("code",[t._v("dict")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"740e5834-3a29-46b4-9a6f-16142fde533a"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reference"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"STRING"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"subject"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SUBJECT TEXT"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"body"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MESSAGE TEXT"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"from_email"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SENDER EMAIL"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://api.notification.canada.ca/v2/notifications/740e5834-3a29-46b4-9a6f-16142fde533a"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f33517ff-2a88-4f6e-b855-c550268ce08a"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://api.notification.canada.ca/v2/template/f33517ff-2a88-4f6e-b855-c550268ce08a"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"error-codes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#error-codes"}},[t._v("#")]),t._v(" Error codes")]),t._v(" "),e("p",[t._v("If the request fails, the response body is "),e("code",[t._v("json")]),t._v(" with the following keys:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("status_code")]),t._v(" with the integer status code,")]),t._v(" "),e("li",[e("code",[t._v("errors")]),t._v(" with an array of objects. Each object has 2 more keys, one  labeled "),e("code",[t._v("error")]),t._v(" and the other labeled "),e("code",[t._v("message")]),t._v(".")])]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"errors"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"error"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"BadRequestError"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The error message."')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"error"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ValidationError"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The error message."')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status_code"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("p",[t._v("Error messages returned by the API are only in English.")])]),t._v(" "),e("p",[t._v("The table below gives status codes and example error objects.")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("status_code")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("message")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("How to fix")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Can\'t send to this recipient using a team-only API key"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Use the correct type of "),e("RouterLink",{attrs:{to:"/en/keys.html"}},[t._v("API key")])],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Can\'t send to this recipient when service is in trial mode')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Your service cannot send this notification in trial mode. You can request to go live in settings.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Unsupported file type \'(FILE TYPE)\'. Supported types are: \'(ALLOWED TYPES)"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Wrong file type. You can only upload .pdf, .csv, .txt, .jpeg, .png, .doc, .docx, .xls, .xlsx, .rtf or .odt files")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "File did not pass the virus scan"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The file contains a virus")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "sending_method is a required property"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Specify either "),e("code",[t._v("attach")]),t._v(" or "),e("code",[t._v("link")]),t._v(" as a sending method")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "filename is a required property"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Specify a filename for the file you are sending")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "personalisation (key) is not one of [attach, link]"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The sending method specified must be either "),e("code",[t._v("attach")]),t._v(" or "),e("code",[t._v("link")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "(key) : Incorrect padding : Error decoding base64 field"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("The file must be converted to a string that is base64 encoded")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "filename is too short"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("File name must be at least 3 characters")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "filename is too long"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("File name must be less than 250 characters")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("403")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "AuthError",')]),e("br"),e("code",[t._v('"message": "Error: Your system clock must be accurate to within 30 seconds"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Check your system clock")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("403")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "AuthError",')]),e("br"),e("code",[t._v('"message": "Invalid token: API key not found"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Use the correct "),e("RouterLink",{attrs:{to:"/en/keys.html"}},[t._v("API keys")])],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("429")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "RateLimitError",')]),e("br"),e("code",[t._v('"message": "Exceeded rate limit for key type TEAM/TEST/LIVE of 1000 requests per 60 seconds"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Refer to "),e("RouterLink",{attrs:{to:"/en/limits.html#rate-limits"}},[t._v("API rate limits")]),t._v(" for more information")],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("429")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "TooManyRequestsError",')]),e("br"),e("code",[t._v('"message": "Exceeded send limits (LIMIT NUMBER) for today"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Refer to "),e("RouterLink",{attrs:{to:"/en/limits.html"}},[t._v("service limits")]),t._v(" for the limit number")],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("500")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "Exception",')]),e("br"),e("code",[t._v('"message": "Internal server error"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("GC Notify was unable to process the request, resend your notification.")])])])]),t._v(" "),e("h2",{attrs:{id:"sending-a-text-message"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sending-a-text-message"}},[t._v("#")]),t._v(" Sending a text message")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("POST /v2/notifications/sms\n")])])]),e("h3",{attrs:{id:"request-body-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-body-2"}},[t._v("#")]),t._v(" Request body")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"phone_number"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+19021234567"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f33517ff-2a88-4f6e-b855-c550268ce08a"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"arguments-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#arguments-2"}},[t._v("#")]),t._v(" Arguments")]),t._v(" "),e("p",[e("strong",[t._v("phone_number (required)")])]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("phone_number")]),t._v(" of the recipient of the text message.")]),t._v(" "),e("Content",{attrs:{"page-key":t.$site.pages.find(t=>"en/_arg_template_id.md"===t.relativePath).key}}),t._v(" "),e("p",[e("strong",[t._v("personalisation (optional)")])]),t._v(" "),e("p",[t._v("Use "),e("code",[t._v("personalisation")]),t._v(" if a template has placeholder fields for personalised information such as name or reference number, you must provide their values in a dictionary with key value pairs. For example:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"personalisation"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"first_name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Amala"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"application_date"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-01-01"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("You can leave out this argument if a template does not have any placeholder fields for personalised information.")]),t._v(" "),e("p",[e("strong",[t._v("reference (optional)")])]),t._v(" "),e("p",[e("code",[t._v("reference")]),t._v(" is an identifier you can create if necessary. This reference identifies a single notification or a batch of notifications. It must not contain any personal information such as name or postal address. For example:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reference"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"STRING"')]),t._v("\n")])])]),e("p",[t._v("You can leave out this argument if you do not have a reference.")]),t._v(" "),e("p",[e("strong",[t._v("sms_sender_id (optional)")])]),t._v(" "),e("p",[e("code",[t._v("sms_sender_id")]),t._v(" is a unique identifier of the sender of the text message notification.")]),t._v(" "),e("p",[t._v("To find the text message sender:")]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://notification.canada.ca/sign-in",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sign in to  Notify"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("li",[t._v("Go to the "),e("strong",[t._v("Settings")]),t._v(" page.")]),t._v(" "),e("li",[t._v("In the "),e("strong",[t._v("Text Messages")]),t._v(" section, select "),e("strong",[t._v("Manage")]),t._v(" on the "),e("strong",[t._v("Text Message sender")]),t._v(" row.")])]),t._v(" "),e("p",[t._v("You can then either:")]),t._v(" "),e("ul",[e("li",[t._v("copy the sender ID that you want to use and paste it into the method")]),t._v(" "),e("li",[t._v("select "),e("strong",[t._v("Change")]),t._v(" to change the default sender that the service will use, and select "),e("strong",[t._v("Save")])])]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sms_sender_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8e222534-7f05-4972-86e3-17c5d9f894e2"')]),t._v("\n")])])]),e("p",[t._v("You can leave out this argument if your service only has one text message sender, or if you want to use the default sender.")]),t._v(" "),e("h3",{attrs:{id:"response-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-2"}},[t._v("#")]),t._v(" Response")]),t._v(" "),e("p",[t._v("If the request is successful, the response body is "),e("code",[t._v("json")]),t._v(" with a status code of "),e("code",[t._v("201")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"740e5834-3a29-46b4-9a6f-16142fde533a"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reference"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"STRING"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"body"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MESSAGE TEXT"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"from_number"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SENDER"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://api.notification.canada.ca/v2/notifications/740e5834-3a29-46b4-9a6f-16142fde533a"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f33517ff-2a88-4f6e-b855-c550268ce08a"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://api.notification.canada.ca/v2/template/ceb50d92-100d-4b8b-b559-14fa3b091cd"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("If you are using the "),e("RouterLink",{attrs:{to:"/en/keys.html"}},[t._v("test API key")]),t._v(", all your messages will come back with a "),e("code",[t._v("delivered")]),t._v(" status.")],1),t._v(" "),e("p",[t._v("All messages sent using the team and safelist or live keys will appear on your dashboard.")]),t._v(" "),e("h3",{attrs:{id:"error-codes-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#error-codes-2"}},[t._v("#")]),t._v(" Error codes")]),t._v(" "),e("p",[t._v("If the request is not successful, the response body is "),e("code",[t._v("json")]),t._v(", refer to the table below for details.")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("status_code")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("message")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("How to fix")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Can\'t send to this recipient using a team-only API key"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Use the correct type of "),e("RouterLink",{attrs:{to:"/en/keys.html"}},[t._v("API key")])],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Can\'t send to this recipient when service is in trial mode"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Your service cannot send this notification in trial mode. You can request to go live in settings.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("403")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "AuthError",')]),e("br"),e("code",[t._v('"message": "Error: Your system clock must be accurate to within 30 seconds"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Check your system clock")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("403")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "AuthError",')]),e("br"),e("code",[t._v('"message": "Invalid token: API key not found"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Use the correct "),e("RouterLink",{attrs:{to:"/en/keys.html"}},[t._v("API key")])],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("429")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "RateLimitError",')]),e("br"),e("code",[t._v('"message": "Exceeded rate limit for key type TEAM/TEST/LIVE of 1000 requests per 60 seconds"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Refer to "),e("RouterLink",{attrs:{to:"/en/limits.html"}},[t._v("API rate limits")]),t._v(" for more information")],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("429")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "TooManyRequestsError",')]),e("br"),e("code",[t._v('"message": "Exceeded send limits (LIMIT NUMBER) for today"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Refer to "),e("RouterLink",{attrs:{to:"/en/limits.html"}},[t._v("service limits")]),t._v(" for the limit number")],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("500")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "Exception",')]),e("br"),e("code",[t._v('"message": "Internal server error"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("GC Notify was unable to process the request, resend your notification.")])])])]),t._v(" "),e("h2",{attrs:{id:"sending-notifications-in-bulk"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sending-notifications-in-bulk"}},[t._v("#")]),t._v(" Sending notifications in bulk")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("POST /v2/notifications/bulk\n")])])]),e("p",[t._v("Send notifications in bulk, up to 50,000 recipients at a time, for a single template. You can schedule to send notifications up to 4 days in advance.")]),t._v(" "),e("h3",{attrs:{id:"request-body-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-body-3"}},[t._v("#")]),t._v(" Request body")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bulk send name"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f33517ff-2a88-4f6e-b855-c550268ce08a"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rows"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"email address"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alice@example.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Alice"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bob@example.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bob"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scheduled_for"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2021-06-08T15:15:00"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" # optional string\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reply_to_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f025b1a9-63af-43e8-b969-627bfe544bba"')]),t._v(" # optional string\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"arguments-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#arguments-3"}},[t._v("#")]),t._v(" Arguments")]),t._v(" "),e("p",[e("strong",[t._v("name (required)")])]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("name")]),t._v(" of your bulk sending job. Used to identify this bulk of notifications later on.")]),t._v(" "),e("Content",{attrs:{"page-key":t.$site.pages.find(t=>"en/_arg_template_id.md"===t.relativePath).key}}),t._v(" "),e("p",[e("strong",[t._v("rows (required)")])]),t._v(" "),e("p",[e("code",[t._v("rows")]),t._v(" is an array of arrays. The first line is the header and should include at least "),e("code",[t._v("email address")]),t._v(" if you're sending an email template or "),e("code",[t._v("phone number")]),t._v(" if you're sending a text message template. The other column headers should match the placeholder fields (personalised variables) of your template.")]),t._v(" "),e("p",[t._v("The following lines should be your recipients' details and should match the order of column headers. You can have between 1 and 50,000 recipients.")]),t._v(" "),e("h4",{attrs:{id:"optional-arguments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#optional-arguments"}},[t._v("#")]),t._v(" Optional arguments")]),t._v(" "),e("p",[e("strong",[t._v("scheduled_for (optional)")])]),t._v(" "),e("p",[t._v("If you want to send notifications in the future, you can specify a datetime up to 4 days in the future, in "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/ISO_8601",target:"_blank",rel:"noopener noreferrer"}},[t._v("ISO 8601 format"),e("OutboundLink")],1),t._v(". For example: "),e("code",[t._v("2021-06-08T15:15:00")]),t._v(" (UTC time).")]),t._v(" "),e("p",[e("strong",[t._v("reply_to_id (optional)")])]),t._v(" "),e("p",[t._v("If you want to use a specific reply-to email address when sending emails, you can specify a reply-to email address ID.")]),t._v(" "),e("p",[t._v("To find your reply-to email address ID:")]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://notification.canada.ca/sign-in",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sign in to GC Notify"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("li",[t._v("Go to the "),e("strong",[t._v("Settings")]),t._v(" page.")]),t._v(" "),e("li",[t._v("In the "),e("strong",[t._v("Email")]),t._v(" section, select "),e("strong",[t._v("Reply-to email addresses")])]),t._v(" "),e("li",[t._v("Copy the ID of the reply-to email address you want to use")])]),t._v(" "),e("p",[t._v("By default, GC Notify will use your default reply-to email address if you don't specify one, or none if you didn't set up one.")]),t._v(" "),e("p",[e("strong",[t._v("csv (optional)")])]),t._v(" "),e("p",[t._v("If you prefer to pass the content of CSV files instead of rows in the "),e("code",[t._v("rows")]),t._v(" argument, you can do so. Pass the full content of your CSV file in a key named "),e("code",[t._v("csv")]),t._v(". Do not include the "),e("code",[t._v("rows")]),t._v(" argument.")]),t._v(" "),e("p",[t._v("For example:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bulk send name"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f33517ff-2a88-4f6e-b855-c550268ce08a"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"csv"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"email address,name\\nalice@example.com,Alice"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"response-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-3"}},[t._v("#")]),t._v(" Response")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Response timeout")]),t._v(" "),e("p",[t._v("If you specify a response timeout when calling this endpoint, make sure it is set to 15 seconds. The GC Notify API could take a few seconds to validate your request and save the payload if you submit a large bulk sending job with many recipients.")])]),t._v(" "),e("p",[t._v("If the request is successful, the response body is "),e("code",[t._v("json")]),t._v(" with a status code of "),e("code",[t._v("201")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"api_key"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"de1fafa2-fb2a-49c5-9b9a-8400727ecd29"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"key_type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"team"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test"')]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"archived"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"created_at"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2021-06-10T17:14:15.341308+00:00"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"created_by"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6af522d0-2915-4e52-83a3-3690455a5fe6"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Notify service user"')]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0ea216ae-4b03-46b7-ab44-893ae85104f5"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"job_status"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pending"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"notification_count"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"original_file_name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bulk send name"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"processing_finished"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"processing_started"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scheduled_for"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sender_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f025b1a9-63af-43e8-b969-627bfe544bba"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"service"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"afa2be3b-1250-430f-a70f-28a1a9d49dfa"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"service_name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test service"')]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f33517ff-2a88-4f6e-b855-c550268ce08a"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"template_version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"updated_at"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("You can follow the progression of your bulk sending job from the GC Notify web interface.")]),t._v(" "),e("p",[t._v("If you scheduled your batch in the future, you can cancel it from the web interface.")]),t._v(" "),e("h3",{attrs:{id:"error-codes-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#error-codes-3"}},[t._v("#")]),t._v(" Error codes")]),t._v(" "),e("p",[t._v("If the request is not successful, the response body is "),e("code",[t._v("json")]),t._v(", refer to the table below for details.")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("status_code")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("message")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("How to fix")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "You should specify either rows or csv"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Pass data through "),e("code",[t._v("rows")]),t._v(" or "),e("code",[t._v("csv")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "name is a required property"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Specify the "),e("code",[t._v("name")]),t._v(" property")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "scheduled_for 42 is not of type string, null"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Check that you pass a valid "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/ISO_8601",target:"_blank",rel:"noopener noreferrer"}},[t._v("ISO 8601 datetime"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "scheduled_for datetime cannot be in the past"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Check that you pass a datetime in the future")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "scheduled_for datetime can only be up to 96 hours in the future"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Check that you pass datetime at most 4 days in the future")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "ValidationError",')]),e("br"),e("code",[t._v('"message": "scheduled_for datetime format is invalid. It must be a valid ISO8601 date time format, https://en.wikipedia.org/wiki/ISO_8601"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Check that you pass a valid "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/ISO_8601",target:"_blank",rel:"noopener noreferrer"}},[t._v("ISO 8601 datetime"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Template not found"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Update template ID")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Template has been deleted"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Create a new template and update its ID")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Service is not allowed to send emails"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Turn on email sending in Settings")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Missing column headers: name"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Add the missing column header")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Duplicate column headers: name, NAME"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Remove the duplicate column headers")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Too many rows. Maximum number of rows allowed is 50000"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Pass less than 50,000 rows")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('{"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "You cannot send to these recipients because you used a team and safelist API key."')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Request to go live in Settings or use "),e("RouterLink",{attrs:{to:"/en/keys.html"}},[t._v("a live API key")])],1)]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "You cannot send to these recipients because your service is in trial mode. You can only send to members of your team and your safelist."')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Add more team members, update your safelist or request to go live")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "You only have 50 remaining messages before you reach your daily limit. You\'ve tried to send 75 messages."')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Remove rows in excess, try again tomorrow or request a limit increase")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("400")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "BadRequestError",')]),e("br"),e("code",[t._v('"message": "Some rows have errors. Row 1 - name: Missing. Row 2 - email address: invalid recipient. Row 3 - name: Missing. Row 4 - name: Missing."')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Make sure rows don't have missing values")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("500")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("[{")]),e("br"),e("code",[t._v('"error": "Exception",')]),e("br"),e("code",[t._v('"message": "Internal server error"')]),e("br"),e("code",[t._v("}]")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("GC Notify was unable to process the request. Re-send your notification.")])])])]),t._v(" "),e("h2",{attrs:{id:"curl-example"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#curl-example"}},[t._v("#")]),t._v(" CURL Example")]),t._v(" "),e("p",[t._v("Example to send a single notification")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("curl --request POST \\\n  --url https://api.notification.canada.ca/v2/notifications/email \\\n  --header 'Authorization: ApiKey-v1 YOUR_API_KEY' \\\n  --header 'Content-Type: application/json' \\\n  --header 'base_url: https:///notification.canada.ca' \\\n  --data '{\n        \"email_address\": \"EMAIL_ADDRESS_TO_SEND_NOTIFICAITION\",\n        \"template_id\": \"TEMPLATE_ID\"\n}'\n")])])])],1)}),[],!1,null,null,null);e.default=r.exports}}]);